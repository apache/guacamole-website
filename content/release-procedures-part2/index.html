<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

    <head>
    <link rel="stylesheet" href="/styles/main.css?s=2e802ec8ebf673f18506558bd1588311">
    <link rel="icon" type="image/png" href="/images/guacamole-logo-64.png"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, target-densitydpi=device-dpi"/>
    <meta charset="UTF-8"/>
    <title>Apache Guacamole™: Producing a release candidate</title>
</head>


    <body>

        <!-- Header -->
<div id="header">
    <h1><a href="/">Apache Guacamole™</a></h1>
    <ul id="navigation" class="menu">
        

    
    

    
    
        
            
                <li>
                    <a href="/releases/"
                        
                            class="download"
                            >Downloads</a>
                </li>
            
        
    

    
    

    
    

    
    
        
            
                <li class="dropdown">
                    
                    <a class="dropdown-toggle "
                       href="#">Docs</a>
                    <ul class="dropdown-menu">
                        

    
    
        
            
                <li>
                    <a href="/faq/"
                        >FAQ</a>
                </li>
            
        
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    
        
            
                <li>
                    <a href="/api-documentation/"
                        >API / Development</a>
                </li>
            
        
    

    
    

    
    

    
    

    
    

    
    

    
    
        
            
                <li>
                    <a href="/doc/gug/"
                        >Guacamole Manual</a>
                </li>
            
        
    

    
    

    
    


                    </ul>
                </li>
            
        
    

    
    

    
    
        
            
                <li class="dropdown">
                    
                    <a class="dropdown-toggle "
                       href="#">Community</a>
                    <ul class="dropdown-menu">
                        

    
    

    
    

    
    

    
    
        
            
                <li>
                    <a href="https://github.com/search?utf8=%E2%9C%93&q=repo%3Aapache%2Fguacamole-server+repo%3Aapache%2Fguacamole-client+repo%3Aapache%2Fguacamole-website&type=Repositories&ref=searchresults"
                        >GitHub</a>
                </li>
            
        
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    

    
    
        
            
                <li>
                    <a href="/open-source/"
                        >Contributing</a>
                </li>
            
        
    

    
    
        
            
                <li>
                    <a href="/support/"
                        >Help / Support</a>
                </li>
            
        
    


                    </ul>
                </li>
            
        
    

    
    

    
    

    
    
        
            
                <li>
                    <a href="https://issues.apache.org/jira/browse/GUACAMOLE/"
                        >JIRA</a>
                </li>
            
        
    

    
    

    
    
        
            
                <li>
                    <a href="/security/"
                        >Security Reports</a>
                </li>
            
        
    

    
    
        
            
                <li class="dropdown">
                    
                    <a class="dropdown-toggle apache"
                       href="#">Apache Software Foundation</a>
                    <ul class="dropdown-menu">
                        

    
    

    
    

    
    
        
            
                <li>
                    <a href="http://www.apache.org/"
                        >ASF Homepage</a>
                </li>
            
        
    

    
    

    
    

    
    
        
            
                <li>
                    <a href="http://www.apache.org/licenses/"
                        >License</a>
                </li>
            
        
    

    
    

    
    
        
            
                <li>
                    <a href="http://www.apache.org/foundation/thanks.html"
                        >Thanks</a>
                </li>
            
        
    

    
    

    
    

    
    
        
            
                <li>
                    <a href="http://www.apache.org/foundation/sponsorship.html"
                        >Sponsorship</a>
                </li>
            
        
    

    
    

    
    

    
    
        
            
                <li>
                    <a href="http://www.apache.org/foundation/policies/conduct.html"
                        >Code of Conduct</a>
                </li>
            
        
    

    
    

    
    

    
    


                    </ul>
                </li>
            
        
    

    
    

    
    

    
    

    
    


    </ul>
</div>


        <!-- Content -->
        <div id="page">
            <div id="content">
                <h1>Producing a release candidate</h1>

<ul id="markdown-toc">
  <li><a href="#tag-rc" id="markdown-toc-tag-rc">Tag the release candidate</a></li>
  <li><a href="#upload-rc" id="markdown-toc-upload-rc">Sign and upload release artifacts</a>    <ul>
      <li><a href="#artifacts" id="markdown-toc-artifacts">Normal source / binary artifacts</a></li>
      <li><a href="#staging-maven" id="markdown-toc-staging-maven">Maven artifacts</a></li>
      <li><a href="#docker-images" id="markdown-toc-docker-images">Docker images</a></li>
    </ul>
  </li>
  <li><a href="#upload-docs" id="markdown-toc-upload-docs">Upload documentation and release notes</a></li>
  <li><a href="#ppmc-vote" id="markdown-toc-ppmc-vote">Create the PMC <code class="language-plaintext highlighter-rouge">[VOTE]</code> thread</a></li>
</ul>

<h2 id="tag-rc">Tag the release candidate</h2>

<p>Once <a href="/release-procedures-part1/">the release process has begun</a> and the
release has been <strong>thoroughly tested</strong>, the git repositories must be tagged for
a new release candidate. These tags are made off the release branch (<em>not</em> off
<code class="language-plaintext highlighter-rouge">master</code>), and are in the format <code class="language-plaintext highlighter-rouge">[VERSION]-RC[N]</code>, where <code class="language-plaintext highlighter-rouge">[VERSION]</code> is the
version of the upcoming release and <code class="language-plaintext highlighter-rouge">[N]</code> is the number of the release
candidate:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git tag -m "Release 0.9.11 - RC1." 0.9.11-RC1
$ git push upstream 0.9.11-RC1
</code></pre></div></div>

<p>Each repository relevant to the release must be tagged. At this point, this
will be every repository that has a release branch. This <em>never</em> includes
<code class="language-plaintext highlighter-rouge">guacamole-website</code>, which is not part of the release.</p>

<p>Example: <a href="https://git1-us-west.apache.org/repos/asf?p=guacamole-server.git;a=tag;h=6c2bc47a93899cf00a869e7a2a5416fd5b081ed3">the
“0.9.10-incubating-RC3” tag on
guacamole-server</a></p>

<h2 id="upload-rc">Sign and upload release artifacts</h2>

<p>Create and sign release artifacts for all modified components, uploading to
Apache’s dev dist via SVN (<em>NOT</em> the release dist), grouping the artifacts
within <code class="language-plaintext highlighter-rouge">binary/</code> and <code class="language-plaintext highlighter-rouge">source/</code> subdirectories of a top-level, RC-specific
subdirectory (named in the same <code class="language-plaintext highlighter-rouge">[VERSION]-RC[N]</code> format as the <a href="#tag-rc">repository
tag</a>).</p>

<p>Creating the source and binary artifacts involves building the components of
Guacamole normally. The process for producing signatures and uploading the
artifacts will depend on whether the artifacts are being deployed to a Maven
repository.</p>

<p><strong>If your PGP key is not already present in the <code class="language-plaintext highlighter-rouge">KEYS</code> file, you will need to
add it prior to signing artifacts.</strong></p>

<h3 id="artifacts">Normal source / binary artifacts</h3>

<p>There are currently two source artifacts:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">guacamole-client-[VERSION].tar.gz</code></li>
  <li><code class="language-plaintext highlighter-rouge">guacamole-server-[VERSION].tar.gz</code></li>
</ul>

<p><code class="language-plaintext highlighter-rouge">guacamole-client-[VERSION].tar.gz</code> is created automatically when
<code class="language-plaintext highlighter-rouge">guacamole-client</code> is built with <code class="language-plaintext highlighter-rouge">mvn clean install</code>.
<code class="language-plaintext highlighter-rouge">guacamole-server-[VERSION].tar.gz</code> can be built manually by running <code class="language-plaintext highlighter-rouge">make
dist</code> within <code class="language-plaintext highlighter-rouge">guacamole-server</code>. The <code class="language-plaintext highlighter-rouge">Makefile</code>, etc. will need to
have been generated first by running <code class="language-plaintext highlighter-rouge">autoreconf -fi</code> followed by
<code class="language-plaintext highlighter-rouge">./configure</code>.</p>

<p><code class="language-plaintext highlighter-rouge">guacamole-server</code> does not provide any convenience binaries, but
<code class="language-plaintext highlighter-rouge">guacamole-client</code> does:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">guacamole-[VERSION].war</code></li>
  <li><code class="language-plaintext highlighter-rouge">guacamole-auth-duo-[VERSION].tar.gz</code></li>
  <li><code class="language-plaintext highlighter-rouge">guacamole-auth-header-[VERSION].tar.gz</code></li>
  <li><code class="language-plaintext highlighter-rouge">guacamole-auth-jdbc-[VERSION].tar.gz</code></li>
  <li><code class="language-plaintext highlighter-rouge">guacamole-auth-ldap-[VERSION].tar.gz</code></li>
  <li><code class="language-plaintext highlighter-rouge">guacamole-auth-noauth-[VERSION].tar.gz</code></li>
</ul>

<p>Each of the above can be found within the <code class="language-plaintext highlighter-rouge">guacamole-client</code> source
tree once it has been built with <code class="language-plaintext highlighter-rouge">mvn clean install</code>.</p>

<p>Producing the required MD5 and SHA256 checksums for a given artifact is very
straightforward:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ md5sum FILENAME &gt; FILENAME.md5
$ sha256sum FILENAME &gt; FILENAME.sha
</code></pre></div></div>

<p>To produce the PGP signature for a given artifact, use <code class="language-plaintext highlighter-rouge">gpg</code>, as documented in
Apache’s own <a href="https://www.apache.org/dev/release-signing.html#openpgp-ascii-detach-sig">release signing documentation</a>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ gpg --armor --output FILENAME.asc --detach-sig FILENAME
</code></pre></div></div>

<p>Example: <a href="https://dist.apache.org/repos/dist/dev/incubator/guacamole/?p=17053">the SVN commit uploading RC1 of 0.9.10-incubating (r17053)</a></p>

<h3 id="staging-maven">Maven artifacts</h3>

<p>The following Maven subprojects of <code class="language-plaintext highlighter-rouge">guacamole-client</code> must be
uploaded to Apache’s Nexus:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">guacamole-common</code> (<code class="language-plaintext highlighter-rouge">.jar</code>, source, and javadoc)</li>
  <li><code class="language-plaintext highlighter-rouge">guacamole-common-js</code> (<code class="language-plaintext highlighter-rouge">.zip</code> only)</li>
  <li><code class="language-plaintext highlighter-rouge">guacamole-ext</code> (<code class="language-plaintext highlighter-rouge">.jar</code>, source, and javadoc)</li>
</ul>

<p>Uploading to <a href="https://repository.apache.org/">Apache’s Nexus repository</a>
requires that your username and password be stored within your Maven
<code class="language-plaintext highlighter-rouge">~/.m2/settings.xml</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;settings&gt;
    &lt;servers&gt;
        &lt;server&gt;
            &lt;id&gt;apache&lt;/id&gt;
            &lt;username&gt;YOUR-USERNAME&lt;/username&gt;
            &lt;password&gt;YOUR-PASSWORD&lt;/password&gt;
        &lt;/server&gt;
    &lt;/servers&gt;
&lt;/settings&gt;
</code></pre></div></div>

<p>The ID of the server is arbitrary but must match the <code class="language-plaintext highlighter-rouge">repositoryId</code> value given
to Maven. The examples here use <code class="language-plaintext highlighter-rouge">apache</code>. Most artifacts are Java <code class="language-plaintext highlighter-rouge">.jar</code> files
with corresponding JavaDoc and source jars. Each of these must be signed and
uploaded individually using the <code class="language-plaintext highlighter-rouge">gpg:sign-and-deploy-file</code> mojo:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ mvn gpg:sign-and-deploy-file \
    -Durl=https://repository.apache.org/service/local/staging/deploy/maven2 \
    -DrepositoryId=apache -DpomFile=guacamole-common/pom.xml \
    -Dfile=guacamole-common/target/guacamole-common-0.9.10.jar

$ mvn gpg:sign-and-deploy-file \
    -Durl=https://repository.apache.org/service/local/staging/deploy/maven2 \
    -DrepositoryId=apache -DpomFile=guacamole-common/pom.xml \
    -Dfile=guacamole-common/target/guacamole-common-0.9.10-javadoc.jar \
    -Dclassifier=javadoc

$ mvn gpg:sign-and-deploy-file \
    -Durl=https://repository.apache.org/service/local/staging/deploy/maven2 \
    -DrepositoryId=apache -DpomFile=guacamole-common/pom.xml \
    -Dfile=guacamole-common/target/guacamole-common-0.9.10-sources.jar \
    -Dclassifier=sources
</code></pre></div></div>

<p>The above will need to be done for both <code class="language-plaintext highlighter-rouge">guacamole-common</code> and <code class="language-plaintext highlighter-rouge">guacamole-ext</code>,
assuming both have been modified for the release. For JavaScript artifacts like
<code class="language-plaintext highlighter-rouge">guacamole-common-js</code> which produce a single <code class="language-plaintext highlighter-rouge">.zip</code> file, only the <code class="language-plaintext highlighter-rouge">.zip</code> file
needs to be uploaded. The command for this is slightly different:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ mvn gpg:sign-and-deploy-file \
    -Durl=https://repository.apache.org/service/local/staging/deploy/maven2 \
    -DrepositoryId=apache \
    -DpomFile=guacamole-common-js/pom.xml \
    -Dfile=guacamole-common-js/target/guacamole-common-js-0.9.10.zip \
    -Dpackaging=zip
</code></pre></div></div>

<p>Once everything has been uploaded, log into Apache’s Nexus at
https://repository.apache.org/, locate the staging repository which was
automatically created, and verify things look as expected. Assuming everything
looks good, select close staging repository to make it publicly available; the
URL of the repository will need to be provided in the VOTE email.</p>

<h3 id="docker-images">Docker images</h3>

<p>Both guacamole-client and guacamole-server have associated Docker images which
are produced along with releases as a form of convenience binaries. These
images are <code class="language-plaintext highlighter-rouge">guacamole/guacamole</code> and <code class="language-plaintext highlighter-rouge">guacamole/guacd</code> respectively, both
hosted under the Apache Guacamole project’s <a href="https://hub.docker.com/u/guacamole/">Docker Hub
account</a>.</p>

<p>When building the Docker images, keep in mind:</p>

<ol>
  <li>You should run <code class="language-plaintext highlighter-rouge">git clean -xfd .</code> first, to ensure the build context
uploaded to the Docker daemon is minimal, and that future builds of the
exact same source will not result in different images (this serves as a
pre-release sanity check).</li>
  <li>You <strong>MUST NOT</strong> update the <code class="language-plaintext highlighter-rouge">latest</code> tag on Docker Hub, as this must only
point to the latest stable release.</li>
  <li>When building a Docker image with the intent of pushing to a specific tag,
the Docker image must be built with that tag.</li>
</ol>

<p>For example, to build the <code class="language-plaintext highlighter-rouge">guacamole/guacamole</code> Docker image for the current
release candidate, from within the top-level <code class="language-plaintext highlighter-rouge">guacamole-client</code>
directory:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git clean -xfd .
$ sudo docker build -t guacamole/guacamole:0.9.11-RC1 .
$ sudo docker push guacamole/guacamole:0.9.11-RC1
</code></pre></div></div>

<h2 id="upload-docs">Upload documentation and release notes</h2>

<p>The draft release notes and updated documentation both need to be uploaded to
the website prior to <a href="#pmc-vote">calling the PMC vote</a>. These changes should
be handled like any other website changes - via pull requests against the
<code class="language-plaintext highlighter-rouge">guacamole-website</code> repository. <strong>DO NOT UPDATE THE TOP-LEVEL
DOCUMENTATION SYMBOLIC LINKS!</strong> The top-level symbolic links in the <code class="language-plaintext highlighter-rouge">doc/</code>
directory of <code class="language-plaintext highlighter-rouge">guacamole-website</code> point to the documentation for the
latest release, and are thus only updated once the release is complete.</p>

<p>Take a look at past release notes to get an idea for the expected format. There
is no hard-set requirement for the format of release notes, but things should
be as consistent as possible. Use JIRA to query the issues which have been
completed for the release, manually excluding issues which relate only to
other issues already in the release (bug fixes for a release-specific change,
for example).</p>

<p>Because the script that handles updating project websites often fails to update
for large commits (see <a href="https://issues.apache.org/jira/browse/INFRA-10751">INFRA-10751</a>), uploading documentation first, waiting a bit, and <em>then</em> uploading
the release notes has a greater chance of working. Splitting the two uploads
also helps facilitate code review, as the release notes will be buried in a sea
of auto-generated HTML otherwise.</p>

<p>Examples:</p>

<ul>
  <li><a href="https://github.com/apache/guacamole-website/blob/67adf0802701d696f9dc1a90229da694f4cebbaa/_releases/0.9.10-incubating.md">The draft
release notes for 0.9.10-incubating-RC3</a></li>
  <li><a href="https://github.com/apache/guacamole-website/tree/master/doc/0.9.10-incubating">The updated documentation for 0.9.10-incubating</a></li>
</ul>

<h2 id="ppmc-vote">Create the PMC <code class="language-plaintext highlighter-rouge">[VOTE]</code> thread</h2>

<p>Once the above has been completed, request a vote with an email to
<a href="mailto:dev@guacamole.apache.org">dev@guacamole.apache.org</a> titled <code class="language-plaintext highlighter-rouge">[VOTE] Release Apache Guacamole [VERSION]
(RC[N])</code>, containing the following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Hello all,

The [NTH] release candidate for Apache Guacamole [VERSION] has been
uploaded and is ready for VOTE. The draft release notes (along with links
to artifacts, signatures/checksums, and updated documentation) can be found
here:

http://guacamole.apache.org/releases/[VERSION]/

The git tag for all relevant repositories is "[VERSION]-RC[N]":

https://github.com/apache/guacamole-client/tree/[VERSION]-RC[N]
https://github.com/apache/guacamole-server/tree/[VERSION]-RC[N]
https://github.com/apache/guacamole-manual/tree/[VERSION]-RC[N]

Build instructions are included in the manual, which is part of the updated
documentation referenced above. For convenience:

http://guacamole.apache.org/doc/[VERSION]/gug/installing-guacamole.html

Maven artifacts for guacamole-common, guacamole-common-js, and
guacamole-ext can be found in the following staging repository:

[STAGING REPOSITORY URL]

Source and binary distributions (also linked within the release notes):

https://dist.apache.org/repos/dist/dev/guacamole/[VERSION]-RC[N]/

Artifacts have been signed with the "[EMAIL]" key listed in:

https://dist.apache.org/repos/dist/dev/guacamole/KEYS

Please review and vote:

[ ] +1 Approve the release
[ ] -1 Don't approve the release (please provide specific comments)

This vote will be open for at least 72 hours.

Here is my +1.

Thanks,

[YOU]
</code></pre></div></div>

<p>Where <code class="language-plaintext highlighter-rouge">[VERSION]</code> is the release version, <code class="language-plaintext highlighter-rouge">[N]</code> and <code class="language-plaintext highlighter-rouge">[NTH]</code> are the number of
the release candidate, <code class="language-plaintext highlighter-rouge">[STAGING REPOSITORY URL]</code> is the URL of <a href="#staging-maven">the staging
repository created earlier</a>, <code class="language-plaintext highlighter-rouge">[EMAIL]</code> is the email address
associated with the PGP key used to sign the release artifacts, and <code class="language-plaintext highlighter-rouge">[YOU]</code> is
your name.  Obviously, alter the email as necessary if the scope of the release
is different.</p>

<p>Please note that, though community input is welcome, <em>only PMC votes count
toward the required three “+1” votes</em>.</p>

<p>Example: <a href="http://mail-archives.apache.org/mod_mbox/incubator-guacamole-dev/201612.mbox/%3CCALKeL-PKQxOYqZCvhH6_ZF33Zo_LUZjLVZzTh%2B0VRipgsNxQ1g%40mail.gmail.com%3E">the 0.9.10-incubating-RC3 PPMC VOTE email</a></p>

<p>If any release-blocking issues are discovered, the vote must be canceled and
development must resume, followed by another release candidate (prepared as
above) intended to address those issues.</p>




            </div>
        </div>

        <!-- Footer -->
<div id="footer">

    <!-- Copyrights -->
    <p class="copyright">
        Copyright &copy; 2020 <a href="http://www.apache.org/">The Apache
            Software Foundation</a>, Licensed under the <a
        href="http://www.apache.org/licenses/LICENSE-2.0">Apache License,
        Version 2.0</a>. The HTML5 shield logo has been modified from the
        original work of the <a
            href="http://www.w3.org/">World Wide Web Constortium (W3C)</a>,
        which is licensed under the <a
            href="http://creativecommons.org/licenses/by/3.0/">Creative
        Commons Attribution 3.0</a> license.
    </p>

    <!-- Trademarks -->
    <p class="trademarks">
        Apache Guacamole, Guacamole, Apache, the Apache feather logo, and the
        Apache Guacamole project logo are trademarks of The Apache Software
        Foundation.
    </p>

</div>


        <!-- jQuery -->
        <script src="/scripts/jquery.min.js" type="text/javascript"></script>

        <!-- Dropdown toggle -->
        <script src="/scripts/dropdown.js" type="text/javascript"></script>

    </body>
</html>
