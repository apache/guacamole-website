
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>LDAP authentication &#8212; Apache Guacamole Manual v1.6.0</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="_static/gug.css?v=475feb7f" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=c136e461"></script>
    <script src="_static/tabs.js?v=3ee01567"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'ldap-auth';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Multi-factor authentication" href="mfa.html" />
    <link rel="prev" title="Troubleshooting" href="troubleshooting.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
  
    <p class="title logo__title">Apache Guacamole Manual v1.6.0</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="guacamole-architecture.html">Implementation and architecture</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="installing-guacamole.html">Installing Guacamole</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="guacamole-native.html">Native installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="guacamole-docker.html">Containerized (Docker) installation</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="jdbc-auth.html">Database setup</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="mysql-auth.html">MariaDB / MySQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="postgresql-auth.html">PostgreSQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="sqlserver-auth.html">SQL Server</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="security.html">Securing a Guacamole install</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="reverse-proxy.html">SSL termination</a></li>
<li class="toctree-l2"><a class="reference internal" href="auth-ban.html">Blocking brute-force attacks</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Using Guacamole</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="configuring-guacamole.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="using-guacamole.html">General usage</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="administration.html">Administration</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="batch-import.html">Importing connections</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Extensions</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Active Directory / LDAP</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="mfa.html">Multi-factor authentication</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="duo-auth.html">Duo</a></li>
<li class="toctree-l2"><a class="reference internal" href="totp-auth.html">TOTP</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="sso.html">Single sign-on</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="cas-auth.html">CAS</a></li>
<li class="toctree-l2"><a class="reference internal" href="openid-auth.html">OpenID Connect</a></li>
<li class="toctree-l2"><a class="reference internal" href="saml-auth.html">SAML</a></li>
<li class="toctree-l2"><a class="reference internal" href="ssl-auth.html">Smart cards / Certificates</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="vault.html">Retrieving secrets from a vault</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="external-auth.html">External authentication</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="json-auth.html">Encrypted, signed JSON</a></li>
<li class="toctree-l2"><a class="reference internal" href="header-auth.html">HTTP header</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="radius-auth.html">RADIUS</a></li>
<li class="toctree-l1"><a class="reference internal" href="adhoc-connections.html">Ad-hoc connections</a></li>
<li class="toctree-l1"><a class="reference internal" href="auth-restrict.html">Login / Connection restrictions</a></li>
<li class="toctree-l1"><a class="reference internal" href="recording-playback.html">Session recording player</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Developer's Guide</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="guacamole-protocol.html">The Guacamole protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="libguac.html">libguac</a></li>
<li class="toctree-l1"><a class="reference internal" href="guacamole-common.html">guacamole-common</a></li>
<li class="toctree-l1"><a class="reference internal" href="guacamole-common-js.html">guacamole-common-js</a></li>
<li class="toctree-l1"><a class="reference internal" href="guacamole-ext.html">guacamole-ext</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom-protocols.html">Adding new protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom-auth.html">Custom authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="event-listeners.html">Event listeners</a></li>
<li class="toctree-l1"><a class="reference internal" href="writing-you-own-guacamole-app.html">Writing your own Guacamole application</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendices</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="protocol-reference.html">Guacamole protocol reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="jdbc-auth-schema.html">Database schema reference</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">



<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>LDAP authentication</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#how-guacamole-uses-ldap">How Guacamole uses LDAP</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#intalling-enabling-the-ldap-extension">Intalling/Enabling the LDAP extension</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#preparing-your-ldap-directory-optional">Preparing your LDAP directory (optional)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#applying-the-schema-changes-to-openldap">Applying the schema changes to OpenLDAP</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#associating-ldap-with-a-database-recommended">Associating LDAP with a database (recommended)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#required-configuration">Required configuration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#additional-configuration-optional">Additional configuration (optional)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-multiple-ldap-servers">Using multiple LDAP servers</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#completing-installation">Completing installation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#parameter-tokens">Parameter tokens</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-ldap-schema">The LDAP schema</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#users">Users</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#connections-and-parameters">Connections and parameters</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="ldap-authentication">
<h1>LDAP authentication<a class="headerlink" href="#ldap-authentication" title="Link to this heading">#</a></h1>
<p>Guacamole supports LDAP authentication via an extension available from the main
project website. This extension allows users and connections to be stored
directly within an LDAP directory. If you have a centralized authentication
system that uses LDAP, Guacamole’s LDAP support can be a good way to allow your
users to use their existing usernames and passwords to log into Guacamole.</p>
<p>To use the LDAP authentication extension, you will need:</p>
<ol class="arabic simple">
<li><p>An LDAP directory as storage for all authentication data, such as OpenLDAP.</p></li>
<li><p>The ability to modify the schema of your LDAP directory.</p></li>
</ol>
<p>The instructions here assume you already have an LDAP directory installed and
working, and do not cover the initial setup of such a directory.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>You will need to restart the Guacamole web application in order to complete
configuration. Doing this will disconnect all active users, so please:</p>
<ul class="simple">
<li><p><strong>Do this only at a time that you can tolerate service unavailability</strong>, such
as a scheduled maintenance window.</p></li>
<li><p>Keep in mind that <strong>configuration errors may prevent Guacamole from starting
back up</strong>.</p></li>
</ul>
</div>
<section id="how-guacamole-uses-ldap">
<span id="ldap-architecture"></span><h2>How Guacamole uses LDAP<a class="headerlink" href="#how-guacamole-uses-ldap" title="Link to this heading">#</a></h2>
<p>If the LDAP extension is installed, Guacamole will authenticate users against
your LDAP server by attempting a bind as that user. The given username and
password will be submitted to the LDAP server during the bind attempt.</p>
<p>If the bind attempt is successful, the set of available Guacamole connections,
users, and groups are queried from the LDAP directory by executing an LDAP
query <strong>as the bound user</strong>. Each Guacamole connection is represented within
the directory as a special type of group: <code class="docutils literal notranslate"><span class="pre">guacConfigGroup</span></code>.  Attributes
associated with the group define the protocol and parameters of the connection,
and users are allowed access to the connection only if they are associated with
that group.</p>
<p>This architecture has a number of benefits:</p>
<ol class="arabic simple">
<li><p>Your users can use their existing usernames and passwords to log into
Guacamole.</p></li>
<li><p>You can manage Guacamole connections using the same tool that you already
use to manage your LDAP directory, such as <a class="reference external" href="https://directory.apache.org/studio/">Apache Directory
Studio</a>.</p></li>
<li><p>Existing security restrictions can limit visibility/accessibility of
Guacamole connections.</p></li>
<li><p>Access to connections can easily be granted and revoked, as each connection
is represented by a group.</p></li>
</ol>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Though Guacamole connections can be stored within the LDAP directory, this is
not required. Connection data can alternatively be stored within a database
like MySQL or PostgreSQL as long as the LDAP username matches the username of
the database user. Configuring Guacamole to use a database for authentication
or connection storage is covered in <a class="reference internal" href="jdbc-auth.html"><span class="doc std std-doc">Database authentication</span></a> and later in this chapter in
<a class="reference internal" href="#ldap-and-database"><span class="std std-ref">Associating LDAP with a database (recommended)</span></a>.</p>
</div>
</section>
<section id="intalling-enabling-the-ldap-extension">
<span id="ldap-downloading"></span><h2>Intalling/Enabling the LDAP extension<a class="headerlink" href="#intalling-enabling-the-ldap-extension" title="Link to this heading">#</a></h2>
<p>Guacamole is configured differently depending on whether Guacamole was
<a class="reference internal" href="installing-guacamole.html"><span class="doc std std-doc">installed natively</span></a> or <a class="reference internal" href="guacamole-docker.html"><span class="doc std std-doc">using the provided Docker
images</span></a>. The documentation here covers both methods.</p>
<div class="tab-set docutils">
<input checked="True" class="tab-input" id="tab-set--0-input--1" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--1">Native Webapp (Tomcat)</label><div class="tab-content docutils">
<p>Native installations of Guacamole under <a class="reference external" href="https://tomcat.apache.org/">Apache Tomcat</a>
or similar are configured by modifying the contents of <code class="docutils literal notranslate"><span class="pre">GUACAMOLE_HOME</span></code>
(<a class="reference internal" href="configuring-guacamole.html#guacamole-home"><span class="std std-ref">Guacamole’s configuration directory</span></a>), which is located at
<code class="docutils literal notranslate"><span class="pre">/etc/guacamole</span></code> by default and may need to be created first:</p>
<ol class="arabic simple">
<li><p>Download <a class="reference external" href="https://apache.org/dyn/closer.lua/guacamole/1.6.0/binary/guacamole-auth-ldap-1.6.0.tar.gz?action=download"><code class="docutils literal notranslate"><span class="pre">guacamole-auth-ldap-1.6.0.tar.gz</span></code></a> from <a class="reference external" href="https://guacamole.apache.org/releases/1.6.0">the release page for
Apache Guacamole 1.6.0</a>
and extract it.</p></li>
<li><p>Create the <code class="docutils literal notranslate"><span class="pre">GUACAMOLE_HOME/extensions</span></code> directory, if it does not already
exist.</p></li>
<li><p>Copy the <code class="docutils literal notranslate"><span class="pre">guacamole-auth-ldap-1.6.0.jar</span></code> file from the contents of the
archive to <code class="docutils literal notranslate"><span class="pre">GUACAMOLE_HOME/extensions/</span></code>.</p></li>
<li><p>Proceed with the configuring Guacamole for the newly installed extension as
described below. The extension will be loaded after Guacamole has been
restarted.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Download and documentation links for all officially supported extensions for a
particular version of Guacamole are always provided in the release notes for
that version. The copy of the documentation you are reading now is from <a class="reference external" href="https://guacamole.apache.org/releases/1.6.0">Apache
Guacamole 1.6.0</a>.</p>
<p><strong>If you are using a different version of Guacamole, please locate that version
within <a class="reference external" href="https://guacamole.apache.org/releases/">the release archives</a> and
consult the documentation for that release instead.</strong></p>
</div>
</div>
<input class="tab-input" id="tab-set--0-input--2" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--2">Container (Docker)</label><div class="tab-content docutils">
<p>Docker installations of Guacamole include a bundled copy of <a class="reference external" href="https://tomcat.apache.org/">Apache
Tomcat</a> and are configured using environment
variables. The startup process of the Docker image automatically populates
<code class="docutils literal notranslate"><span class="pre">GUACAMOLE_HOME</span></code> (<a class="reference internal" href="configuring-guacamole.html#guacamole-home"><span class="std std-ref">Guacamole’s configuration directory</span></a>) based
on the values of these variables.</p>
<dl class="simple myst">
<dt>If deploying Guacamole using Docker Compose:</dt><dd><p>You will need to add at least one relevant environment variable to the
<code class="docutils literal notranslate"><span class="pre">environment</span></code> section of your <code class="docutils literal notranslate"><span class="pre">guacamole/guacamole</span></code> container, such as the
<code class="docutils literal notranslate"><span class="pre">LDAP_ENABLED</span></code> environment variable:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">LDAP_ENABLED</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
</pre></div>
</div>
</dd>
<dt>If instead deploying Guacamole by running <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span></code> manually:</dt><dd><p>The same environment variable(s) will need to be provided using the <code class="docutils literal notranslate"><span class="pre">-e</span></code>
option. For example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>docker<span class="w"> </span>run<span class="w"> </span>--name<span class="w"> </span>some-guacamole<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-e<span class="w"> </span><span class="nv">LDAP_ENABLED</span><span class="o">=</span><span class="s2">&quot;true&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-d<span class="w"> </span>-p<span class="w"> </span><span class="m">8080</span>:8080<span class="w"> </span>guacamole/guacamole
</pre></div>
</div>
</dd>
</dl>
<p>If <code class="docutils literal notranslate"><span class="pre">LDAP_ENABLED</span></code> is set to <code class="docutils literal notranslate"><span class="pre">false</span></code>, the extension will NOT be
installed, even if other related environment variables have been set. This can
be used to temporarily disable usage of an extension without needing to remove
all other related configuration.</p>
<p>You don’t strictly need to set <code class="docutils literal notranslate"><span class="pre">LDAP_ENABLED</span></code> if other related
environment variables are provided, but the extension will be installed only if
at least <em>one</em> related environment variable is set.</p>
</div>
</div>
</section>
<section id="preparing-your-ldap-directory-optional">
<span id="ldap-schema-changes"></span><h2>Preparing your LDAP directory (optional)<a class="headerlink" href="#preparing-your-ldap-directory-optional" title="Link to this heading">#</a></h2>
<p>Although your LDAP directory already provides a means of storing and
authenticating users, Guacamole also needs storage of connection configuration
data, such as hostnames and ports, and a means of associating users with
connections that they should have access to. You can do this either through
modifying the LDAP directory schema, or through using a database like MySQL or
PostgreSQL. If you do not wish to use the LDAP directory for connection
storage, skip ahead to <a class="reference internal" href="#ldap-and-database"><span class="std std-ref">Associating LDAP with a database (recommended)</span></a>.</p>
<p>If you wish to store connection data directly within the LDAP directory, the
required modifications to the LDAP schema are made through applying one of the
provided schema files. These schema files define an additional object class,
<code class="docutils literal notranslate"><span class="pre">guacConfigGroup</span></code>, which contains all configuration information for a
particular connection, and can be associated with arbitrarily-many users and
groups. Each connection defined by a <code class="docutils literal notranslate"><span class="pre">guacConfigGroup</span></code> will be accessible only
by users who are members of that group (specified with the member attribute),
or who are members of associated groups (specified with the <code class="docutils literal notranslate"><span class="pre">seeAlso</span></code>
attribute).</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The instructions given for applying the Guacamole LDAP schema changes are
specific to OpenLDAP, but other LDAP implementations, including Active
Directory, will have their own methods for updating the schema.</p>
<p>If you are not using OpenLDAP, a standards-compliant schema file is provided
that can be used to update the schema of any LDAP directory supporting
RFC-2252. Please consult the documentation of your LDAP directory to determine
how such schema changes can be applied.</p>
</div>
<p>The schema files are located within the <code class="docutils literal notranslate"><span class="pre">schema/</span></code> directory of the archive
containing the LDAP extension. You will only need one of these files:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">guacConfigGroup.schema</span></code></dt><dd><p>A standards-compliant file describing the schema. This file can be used with
any LDAP directory compliant with RFC-2252.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">guacConfigGroup.ldif</span></code></dt><dd><p>An LDIF file compatible with OpenLDAP. This file was automatically built from
the provided <code class="docutils literal notranslate"><span class="pre">.schema</span></code> file for convenience.</p>
</dd>
</dl>
<p>This chapter will cover applying <code class="docutils literal notranslate"><span class="pre">guacConfigGroup.ldif</span></code> to an OpenLDAP server.
If you are not using OpenLDAP, your LDAP server should provide documentation
for modifying its schema. If this is the case, please consult the documentation
of your LDAP server before proceeding.</p>
<section id="applying-the-schema-changes-to-openldap">
<h3>Applying the schema changes to OpenLDAP<a class="headerlink" href="#applying-the-schema-changes-to-openldap" title="Link to this heading">#</a></h3>
<p>Schema changes to OpenLDAP are applied using the <strong class="command">ldapadd</strong> utility
with the provided <code class="docutils literal notranslate"><span class="pre">guacConfigGroup.ldif</span></code> file:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>ldapadd<span class="w"> </span>-Q<span class="w"> </span>-Y<span class="w"> </span>EXTERNAL<span class="w"> </span>-H<span class="w"> </span>ldapi:///<span class="w"> </span>-f<span class="w"> </span>schema/guacConfigGroup.ldif
<span class="go">adding new entry &quot;cn=guacConfigGroup,cn=schema,cn=config&quot;</span>

<span class="gp">#</span>
</pre></div>
</div>
<p>If the <code class="docutils literal notranslate"><span class="pre">guacConfigGroup</span></code> object was added successfully, you should see output
as above. You can confirm the presence of the new object class using
<strong class="command">ldapsearch</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>ldapsearch<span class="w"> </span>-Q<span class="w"> </span>-LLL<span class="w"> </span>-Y<span class="w"> </span>EXTERNAL<span class="w"> </span>-H<span class="w"> </span>ldapi:///<span class="w"> </span>-b<span class="w"> </span><span class="nv">cn</span><span class="o">=</span>schema,cn<span class="o">=</span>config<span class="w"> </span>dn
<span class="go">dn: cn=schema,cn=config</span>

<span class="go">dn: cn={0}core,cn=schema,cn=config</span>

<span class="go">dn: cn={1}cosine,cn=schema,cn=config</span>

<span class="go">dn: cn={2}nis,cn=schema,cn=config</span>

<span class="go">dn: cn={3}inetorgperson,cn=schema,cn=config</span>

<span class="go">dn: cn={4}guacConfigGroup,cn=schema,cn=config</span>

<span class="gp">#</span>
</pre></div>
</div>
</section>
</section>
<section id="associating-ldap-with-a-database-recommended">
<span id="ldap-and-database"></span><h2>Associating LDAP with a database (recommended)<a class="headerlink" href="#associating-ldap-with-a-database-recommended" title="Link to this heading">#</a></h2>
<p>If you install both the LDAP authentication as well as support for a database
(following the instructions in <a class="reference internal" href="jdbc-auth.html"><span class="doc std std-doc">Database authentication</span></a>), Guacamole will automatically
attempt to authenticate against both systems whenever a user attempts to log
in. In addition to any visible objects within the LDAP directory, that user
will have access to any data associated with their account in the database, as
well as any data associated with user groups that they belong to. LDAP user
accounts and groups will be considered equivalent to database users and groups
if their unique names are identical, as determined by the attributes given for
<a class="reference internal" href="#guac-ldap-config"><span class="std std-ref">the <code class="docutils literal notranslate"><span class="pre">ldap-username-attribute</span></code> and <code class="docutils literal notranslate"><span class="pre">ldap-group-name-attribute</span></code>
properties</span></a>.</p>
<p>Data can be manually associated with LDAP user accounts or groups by creating
corresponding users or groups within the database which each have the same
names. As long as the names are identical, a successful login attempt against
LDAP will be trusted by the database authentication, and that user’s associated
data will be visible.</p>
<p>If an administrator account (such as the default <code class="docutils literal notranslate"><span class="pre">guacadmin</span></code> user provided with
the database authentication) has a corresponding user in the LDAP directory
with permission to read other LDAP users and groups, the Guacamole
administrative interface will include them in the lists presented to the
administrator, and will allow connections from the database to be associated
with those users or groups directly.</p>
</section>
<section id="required-configuration">
<span id="guac-ldap-config"></span><h2>Required configuration<a class="headerlink" href="#required-configuration" title="Link to this heading">#</a></h2>
<div class="tab-set docutils">
<input checked="True" class="tab-input" id="tab-set--1-input--1" name="tab-set--1" type="radio"><label class="tab-label" for="tab-set--1-input--1">Native Webapp (Tomcat)</label><div class="tab-content docutils">
<p>If deploying Guacamole natively, you will need to add a section to your
<code class="docutils literal notranslate"><span class="pre">guacamole.properties</span></code> that looks like the following:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="na">ldap-user-base-dn</span><span class="o">:</span><span class="w"> </span><span class="s">ou=people,dc=example,dc=net</span>
</pre></div>
</div>
<p>The properties that must be set in all cases for any Guacamole installation
using this extension are:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">ldap-user-base-dn</span></code></dt><dd><p>The base of the DN for all Guacamole users. <em>This property is absolutely
required in all cases.</em> All Guacamole users must be descendents of this base
DN.</p>
<p>If a search DN is provided (via <code class="docutils literal notranslate"><span class="pre">ldap-search-bind-dn</span></code>), then Guacamole users
need only be somewhere within the subtree of the specified user base DN.</p>
<p>If a search DN <em>is not</em> provided, then all Guacamole users must be <em>direct
descendents</em> of this base DN, as the base DN will be appended to the username
to derive the user’s DN. For example, if <code class="docutils literal notranslate"><span class="pre">ldap-user-base-dn</span></code> is
“<code class="docutils literal notranslate"><span class="pre">ou=people,dc=example,dc=net</span></code>”, and <code class="docutils literal notranslate"><span class="pre">ldap-username-attribute</span></code> is “uid”, then
a person attempting to login as “<code class="docutils literal notranslate"><span class="pre">user</span></code>” would be mapped to the following
full DN: “<code class="docutils literal notranslate"><span class="pre">uid=user,ou=people,dc=example,dc=net</span></code>”.</p>
</dd>
</dl>
</div>
<input class="tab-input" id="tab-set--1-input--2" name="tab-set--1" type="radio"><label class="tab-label" for="tab-set--1-input--2">Container (Docker)</label><div class="tab-content docutils">
<p>If deploying Guacamole using Docker Compose, you will need to add a set of
environment variables to the <code class="docutils literal notranslate"><span class="pre">environment</span></code> section of your
<code class="docutils literal notranslate"><span class="pre">guacamole/guacamole</span></code> container that looks like the following:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">LDAP_USER_BASE_DN</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;ou=people,dc=example,dc=net&#39;</span>
</pre></div>
</div>
<p>If instead deploying Guacamole by running <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span></code> manually, these same
environment variables will need to be provided using the <code class="docutils literal notranslate"><span class="pre">-e</span></code> option.  For
example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>docker<span class="w"> </span>run<span class="w"> </span>--name<span class="w"> </span>some-guacamole<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-e<span class="w"> </span><span class="nv">LDAP_USER_BASE_DN</span><span class="o">=</span><span class="s2">&quot;ou=people,dc=example,dc=net&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-d<span class="w"> </span>-p<span class="w"> </span><span class="m">8080</span>:8080<span class="w"> </span>guacamole/guacamole
</pre></div>
</div>
<p>The environment variables that must be set in all cases for any Docker-based
Guacamole installation using this extension are:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">LDAP_USER_BASE_DN</span></code></dt><dd><p>The base of the DN for all Guacamole users. <em>This property is absolutely
required in all cases.</em> All Guacamole users must be descendents of this base
DN.</p>
<p>If a search DN is provided (via <code class="docutils literal notranslate"><span class="pre">ldap-search-bind-dn</span></code>), then Guacamole users
need only be somewhere within the subtree of the specified user base DN.</p>
<p>If a search DN <em>is not</em> provided, then all Guacamole users must be <em>direct
descendents</em> of this base DN, as the base DN will be appended to the username
to derive the user’s DN. For example, if <code class="docutils literal notranslate"><span class="pre">ldap-user-base-dn</span></code> is
“<code class="docutils literal notranslate"><span class="pre">ou=people,dc=example,dc=net</span></code>”, and <code class="docutils literal notranslate"><span class="pre">ldap-username-attribute</span></code> is “uid”, then
a person attempting to login as “<code class="docutils literal notranslate"><span class="pre">user</span></code>” would be mapped to the following
full DN: “<code class="docutils literal notranslate"><span class="pre">uid=user,ou=people,dc=example,dc=net</span></code>”.</p>
</dd>
</dl>
</div>
</div>
</section>
<section id="additional-configuration-optional">
<h2>Additional configuration (optional)<a class="headerlink" href="#additional-configuration-optional" title="Link to this heading">#</a></h2>
<div class="tab-set docutils">
<input checked="True" class="tab-input" id="tab-set--2-input--1" name="tab-set--2" type="radio"><label class="tab-label" for="tab-set--2-input--1">Native Webapp (Tomcat)</label><div class="tab-content docutils">
<p>Additional properties may be added to <code class="docutils literal notranslate"><span class="pre">guacamole.properties</span></code> to describe how
your LDAP directory is organized and how Guacamole should connect (and bind) to
your LDAP server:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">ldap-hostname</span></code></dt><dd><p>The hostname of your LDAP server. If omitted, “localhost” will be used by
default. You will need to use a different value if your LDAP server is
located elsewhere.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ldap-port</span></code></dt><dd><p>The port your LDAP server listens on. If omitted, the standard LDAP or LDAPS
port will be used, depending on the encryption method specified with
<code class="docutils literal notranslate"><span class="pre">ldap-encryption-method</span></code> (if any). Unencrypted LDAP uses the standard port of
389, while LDAPS uses port 636. Unless you manually configured your LDAP
server to do otherwise, your LDAP server probably listens on port 389.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ldap-encryption-method</span></code></dt><dd><p>The encryption mechanism that Guacamole should use when communicating with
your LDAP server. Legal values are “none” for unencrypted LDAP, “ssl” for
LDAP over SSL/TLS (commonly known as LDAPS), or “starttls” for STARTTLS. If
omitted, encryption will not be used.</p>
<p>If you do use encryption when connecting to your LDAP server, you will need
to ensure that its certificate chain can be verified using the certificates
in Java’s trust store, often referred to as <code class="docutils literal notranslate"><span class="pre">cacerts</span></code>. If this is not the
case, you will need to use Java’s <code class="docutils literal notranslate"><span class="pre">keytool</span></code> utility to either add the
necessary certificates or to create a new trust store containing those
certificates.</p>
<p>If you will be using your own trust store and not the default <code class="docutils literal notranslate"><span class="pre">cacerts</span></code>, you
will need to specify the full path to that trust store using the system
property <code class="docutils literal notranslate"><span class="pre">javax.net.ssl.trustStore</span></code>. Note that this is a system property and
<em>not</em> a Guacamole property; it must be specified when starting the JVM using
the <code class="docutils literal notranslate"><span class="pre">-D</span></code> option. Your servlet container will provide some means of specifying
startup options for the JVM.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ldap-ssl-protocol</span></code></dt><dd><p>Configures the SSL/TLS protocol version that will be used to contact the
LDAP server, if LDAP encryption is enabled. Legal values are “SSLv3” for
(legacy) SSL version 3 encryption, and “TLSv1”, “TLSv1.1”, “TLSv1.2”, or
“TLSv1.3” for the various versions of TLS, version 1.0 - 1.3. The default
is to use the latest, TLSv1.3.</p>
<p>Please note that the legacy versions of SSLv3 and TLSv1 and TLSv1.1 have
many known vulnerabilities and attack vectors, and you should use the
latest possible TLS version that your LDAP servers support in order
to best protect communication between Guacamole and your LDAP servers.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ldap-max-search-results</span></code></dt><dd><p>The maximum number of search results that can be returned by a single LDAP
query. LDAP queries which exceed this maximum will fail. <em>This property is
optional.</em> If omitted, each LDAP query will be limited to a maximum of 1000
results.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ldap-search-bind-dn</span></code></dt><dd><p>The DN (Distinguished Name) of the user to bind as when authenticating users
that are attempting to log in. If specified, Guacamole will query the LDAP
directory to determine the DN of each user that logs in. If omitted, each
user’s DN will be derived directly using the base DN specified with
<code class="docutils literal notranslate"><span class="pre">ldap-user-base-dn</span></code>.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p><strong>The search DN is used only to resolve a user’s username to their
fully qualified DN during authentication.</strong> Any further LDAP queries for
retrieving objects like users, groups, and connection configurations will be
done <em>using the LDAP credentials of the user that logged in</em>.</p>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ldap-search-bind-password</span></code></dt><dd><p>The password to provide to the LDAP server when binding as
<code class="docutils literal notranslate"><span class="pre">ldap-search-bind-dn</span></code> to authenticate other users. This property is only used
if ldap-search-bind-dn is specified. If omitted, but <code class="docutils literal notranslate"><span class="pre">ldap-search-bind-dn</span></code> is
specified, Guacamole will attempt to bind with the LDAP server without a
password.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ldap-username-attribute</span></code></dt><dd><p>The attribute or attributes which contain the username within all Guacamole
user objects in the LDAP directory. Usually, and by default, this will simply
be “uid”. If your LDAP directory contains users whose usernames are dictated
by different attributes, multiple attributes can be specified here, separated
by commas, but beware: <em>doing so requires that a search DN be provided with
<code class="docutils literal notranslate"><span class="pre">ldap-search-bind-dn</span></code></em>.</p>
<p>If a search DN <em>is not</em> provided, then the single username attribute
specified here will be used together with the user base DN to directly derive
the full DN of each user. For example, if <code class="docutils literal notranslate"><span class="pre">ldap-user-base-dn</span></code> is
“<code class="docutils literal notranslate"><span class="pre">ou=people,dc=example,dc=net</span></code>”, and <code class="docutils literal notranslate"><span class="pre">ldap-username-attribute</span></code> is “uid”, then
a person attempting to login as “<code class="docutils literal notranslate"><span class="pre">user</span></code>” would be mapped to the following
full DN: “<code class="docutils literal notranslate"><span class="pre">uid=user,ou=people,dc=example,dc=net</span></code>”.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ldap-member-attribute</span></code></dt><dd><p>The attribute which contains the members within all group objects in the LDAP
directory. Usually, and by default, this will simply be “member”. If your
LDAP directory contains groups whose members are dictated by a different
attribute, it can be specified here.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ldap-member-attribute-type</span></code></dt><dd><p>Specify whether the attribute defined in <code class="docutils literal notranslate"><span class="pre">ldap-member-attribute</span></code> (Usually
“member”) identifies a group member by DN or by username.  Possible values:
“dn” (the default, if not specified) or “uid”.</p>
<p>Example: an LDAP server may present groups using the <code class="docutils literal notranslate"><span class="pre">groupOfNames</span></code>
scheme:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>dn: cn=group1,ou=Groups,dc=example,dc=net
objectClass: groupOfNames
cn: group1
gidNumber: 12345
member: uid=user1,ou=People,dc=example,dc=net
member: uid=user2,ou=People,dc=example,dc=net
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">ldap-member-attribute</span></code> is <code class="docutils literal notranslate"><span class="pre">member</span></code> and <code class="docutils literal notranslate"><span class="pre">ldap-member-attribute-type</span></code> is <code class="docutils literal notranslate"><span class="pre">dn</span></code>.</p>
<p>Example: an LDAP server may present groups using the <code class="docutils literal notranslate"><span class="pre">posixGroup</span></code>
scheme:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>dn: cn=group1,ou=Groups,dc=example,dc=net
objectClass: posixGroup
cn: group1
gidNumber: 12345
memberUid: user1
memberUid: user2
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">ldap-member-attribute</span></code> is <code class="docutils literal notranslate"><span class="pre">memberUid</span></code> and <code class="docutils literal notranslate"><span class="pre">ldap-member-attribute-type</span></code> is
<code class="docutils literal notranslate"><span class="pre">uid</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ldap-user-attributes</span></code></dt><dd><p>The attribute or attributes to retrieve from the LDAP directory for the
currently logged-in user, separated by commas. If specified, the attributes
listed here are retrieved from each authenticated user and dynamically
applied to the parameters of that user’s connections as <a class="reference internal" href="configuring-guacamole.html#parameter-tokens"><span class="std std-ref">parameter
tokens</span></a> with the prefix “<code class="docutils literal notranslate"><span class="pre">LDAP_</span></code>”. If omitted, LDAP user
attributes will not be used for parameter tokens.</p>
<p>When a user authenticates with LDAP and accesses a particular Guacamole
connection, the values of these tokens will be the values of their
corresponding attributes at the time of authentication. If the attribute has
no value for the current user, then the corresponding token is not applied.
If the attribute has multiple values, then the first value of the attribute
is used.</p>
<p>When converting an LDAP attribute name into a parameter token name, the name
of the attribute is transformed into uppercase with each word separated by
underscores, a naming convention referred to as “uppercase with underscores”
or “<a class="reference external" href="https://en.wikipedia.org/wiki/Naming_convention_(programming)#Multiple-word_identifiers">screaming snake case</a>”.</p>
<p>For example:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>LDAP Attribute</p></th>
<th class="head"><p>Parameter Token</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">lowercase-with-dashes</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">${LDAP_LOWERCASE_WITH_DASHES}</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CamelCase</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">${LDAP_CAMEL_CASE}</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">headlessCamelCase</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">${LDAP_HEADLESS_CAMEL_CASE}</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">lettersAndNumbers1234</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">${LDAP_LETTERS_AND_NUMBERS_1234}</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">aRANDOM_mixOf-3NAMINGConventions</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">${LDAP_A_RANDOM_MIX_OF_3_NAMING_CONVENTIONS}</span></code></p></td>
</tr>
</tbody>
</table>
</div>
<p>Usage of parameter tokens is discussed in more detail in
<a class="reference internal" href="configuring-guacamole.html"><span class="doc std std-doc">Configuring Guacamole</span></a> in <a class="reference internal" href="configuring-guacamole.html#parameter-tokens"><span class="std std-ref">Parameter tokens</span></a>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ldap-user-search-filter</span></code></dt><dd><p>The search filter used to query the LDAP tree for users that can log into and
be granted privileges in Guacamole. <em>If this property is omitted the default of
<code class="docutils literal notranslate"><span class="pre">(objectClass=*)</span></code> will be used.</em></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ldap-config-base-dn</span></code></dt><dd><p>The base of the DN for all Guacamole configurations. <em>This property is
optional.</em> If omitted, the configurations of Guacamole connections will
simply not be queried from the LDAP directory. If specified, this base DN
will be used when querying the configurations accessible by a user once they
have successfully logged in.</p>
<p>Each configuration is analogous to a connection. Within Guacamole’s LDAP
support, each configuration functions as a group, having user members (via
the <code class="docutils literal notranslate"><span class="pre">member</span></code> attribute) and optionally group members (via the <code class="docutils literal notranslate"><span class="pre">seeAlso</span></code>
attribute), where each member of a particular configuration group will have
access to the connection defined by that configuration.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ldap-group-base-dn</span></code></dt><dd><p>The base of the DN for all user groups that may be used by other extensions
to define permissions or that may referenced within Guacamole configurations
using the standard seeAlso attribute. All groups which will be used to
control access to Guacamole configurations must be descendents of this base
DN. <em>If this property is omitted, LDAP groups will have no impact on
Guacamole group memberships, and the <code class="docutils literal notranslate"><span class="pre">seeAlso</span></code> attribute will have no effect
on Guacamole configurations.</em></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ldap-group-name-attribute</span></code></dt><dd><p>The attribute or attributes which define the unique name of user groups in
the LDAP directory. Usually, and by default, this will simply be “cn”. If
your LDAP directory contains groups whose names are dictated by different
attributes, multiple attributes can be specified here, separated by commas.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ldap-group-search-filter</span></code></dt><dd><p>The search filter used to query the LDAP tree for groups that may be used by
other extensions to define permissions. <em>If this property is omitted the
default of <code class="docutils literal notranslate"><span class="pre">(objectClass=*)</span></code> will be used.</em></p>
<p>This has an effect only if <code class="docutils literal notranslate"><span class="pre">ldap-group-base-dn</span></code> is specified.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ldap-dereference-aliases</span></code></dt><dd><p>Whether the LDAP connection follows (dereferences) aliases as it searches the
tree. Possible values for this property are “never” (the default) so that
aliases will never be followed, “searching” to dereference during search
operations after the base object is located, “finding” to dereference in
order to locate the search base, but not during the actual search, and
“always” to always dereference aliases.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ldap-follow-referrals</span></code></dt><dd><p>Whether the LDAP module follows referrals when processing search results from
an LDAP search. Referrals can be pointers to other parts of an LDAP tree, or
to a different server/connection altogether.  This is a boolean parameter,
with valid options of “true” or “false.” The default is false. When disabled,
LDAP referrals will be ignored when encountered by the Guacamole LDAP client
and the client will move on to the next result.  When enabled, the LDAP
client will follow the referral and process results within the referral,
subject to the maximum hops parameter below.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ldap-max-referral-hops</span></code></dt><dd><p>The maximum number of referrals that will be processed before the LDAP client
refuses to follow any more referrals. The default is 5. If the
<code class="docutils literal notranslate"><span class="pre">ldap-follow-referrals</span></code> property is set to false (the default), this option
has no effect. If the <code class="docutils literal notranslate"><span class="pre">ldap-follow-referrals</span></code> option is set to true, this
will limit the depth of referrals followed to the number specified.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ldap-operation-timeout</span></code></dt><dd><p>The timeout, in seconds, of any single LDAP operation. The default is 30
seconds. When this timeout is reached LDAP operations will be aborted.</p>
</dd>
</dl>
</div>
<input class="tab-input" id="tab-set--2-input--2" name="tab-set--2" type="radio"><label class="tab-label" for="tab-set--2-input--2">Container (Docker)</label><div class="tab-content docutils">
<p>Additional properties may be added to <code class="docutils literal notranslate"><span class="pre">guacamole.properties</span></code> to describe how
your LDAP directory is organized and how Guacamole should connect (and bind) to
your LDAP server:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">LDAP_HOSTNAME</span></code></dt><dd><p>The hostname of your LDAP server. If omitted, “localhost” will be used by
default. You will need to use a different value if your LDAP server is
located elsewhere.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">LDAP_PORT</span></code></dt><dd><p>The port your LDAP server listens on. If omitted, the standard LDAP or LDAPS
port will be used, depending on the encryption method specified with
<code class="docutils literal notranslate"><span class="pre">ldap-encryption-method</span></code> (if any). Unencrypted LDAP uses the standard port of
389, while LDAPS uses port 636. Unless you manually configured your LDAP
server to do otherwise, your LDAP server probably listens on port 389.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">LDAP_ENCRYPTION_METHOD</span></code></dt><dd><p>The encryption mechanism that Guacamole should use when communicating with
your LDAP server. Legal values are “none” for unencrypted LDAP, “ssl” for
LDAP over SSL/TLS (commonly known as LDAPS), or “starttls” for STARTTLS. If
omitted, encryption will not be used.</p>
<p>If you do use encryption when connecting to your LDAP server, you will need
to ensure that its certificate chain can be verified using the certificates
in Java’s trust store, often referred to as <code class="docutils literal notranslate"><span class="pre">cacerts</span></code>. If this is not the
case, you will need to use Java’s <code class="docutils literal notranslate"><span class="pre">keytool</span></code> utility to either add the
necessary certificates or to create a new trust store containing those
certificates.</p>
<p>If you will be using your own trust store and not the default <code class="docutils literal notranslate"><span class="pre">cacerts</span></code>, you
will need to specify the full path to that trust store using the system
property <code class="docutils literal notranslate"><span class="pre">javax.net.ssl.trustStore</span></code>. Note that this is a system property and
<em>not</em> a Guacamole property; it must be specified when starting the JVM using
the <code class="docutils literal notranslate"><span class="pre">-D</span></code> option. Your servlet container will provide some means of specifying
startup options for the JVM.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">LDAP_SSL_PROTOCOL</span></code></dt><dd><p>Configures the SSL/TLS protocol version that will be used to contact the
LDAP server, if LDAP encryption is enabled. Legal values are “SSLv3” for
(legacy) SSL version 3 encryption, and “TLSv1”, “TLSv1.1”, “TLSv1.2”, or
“TLSv1.3” for the various versions of TLS, version 1.0 - 1.3. The default
is to use the latest, TLSv1.3.</p>
<p>Please note that the legacy versions of SSLv3 and TLSv1 and TLSv1.1 have
many known vulnerabilities and attack vectors, and you should use the
latest possible TLS version that your LDAP servers support in order
to best protect communication between Guacamole and your LDAP servers.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">LDAP_MAX_SEARCH_RESULTS</span></code></dt><dd><p>The maximum number of search results that can be returned by a single LDAP
query. LDAP queries which exceed this maximum will fail. <em>This property is
optional.</em> If omitted, each LDAP query will be limited to a maximum of 1000
results.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">LDAP_SEARCH_BIND_DN</span></code></dt><dd><p>The DN (Distinguished Name) of the user to bind as when authenticating users
that are attempting to log in. If specified, Guacamole will query the LDAP
directory to determine the DN of each user that logs in. If omitted, each
user’s DN will be derived directly using the base DN specified with
<code class="docutils literal notranslate"><span class="pre">ldap-user-base-dn</span></code>.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p><strong>The search DN is used only to resolve a user’s username to their
fully qualified DN during authentication.</strong> Any further LDAP queries for
retrieving objects like users, groups, and connection configurations will be
done <em>using the LDAP credentials of the user that logged in</em>.</p>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">LDAP_SEARCH_BIND_PASSWORD</span></code></dt><dd><p>The password to provide to the LDAP server when binding as
<code class="docutils literal notranslate"><span class="pre">ldap-search-bind-dn</span></code> to authenticate other users. This property is only used
if ldap-search-bind-dn is specified. If omitted, but <code class="docutils literal notranslate"><span class="pre">ldap-search-bind-dn</span></code> is
specified, Guacamole will attempt to bind with the LDAP server without a
password.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">LDAP_USERNAME_ATTRIBUTE</span></code></dt><dd><p>The attribute or attributes which contain the username within all Guacamole
user objects in the LDAP directory. Usually, and by default, this will simply
be “uid”. If your LDAP directory contains users whose usernames are dictated
by different attributes, multiple attributes can be specified here, separated
by commas, but beware: <em>doing so requires that a search DN be provided with
<code class="docutils literal notranslate"><span class="pre">ldap-search-bind-dn</span></code></em>.</p>
<p>If a search DN <em>is not</em> provided, then the single username attribute
specified here will be used together with the user base DN to directly derive
the full DN of each user. For example, if <code class="docutils literal notranslate"><span class="pre">ldap-user-base-dn</span></code> is
“<code class="docutils literal notranslate"><span class="pre">ou=people,dc=example,dc=net</span></code>”, and <code class="docutils literal notranslate"><span class="pre">ldap-username-attribute</span></code> is “uid”, then
a person attempting to login as “<code class="docutils literal notranslate"><span class="pre">user</span></code>” would be mapped to the following
full DN: “<code class="docutils literal notranslate"><span class="pre">uid=user,ou=people,dc=example,dc=net</span></code>”.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">LDAP_MEMBER_ATTRIBUTE</span></code></dt><dd><p>The attribute which contains the members within all group objects in the LDAP
directory. Usually, and by default, this will simply be “member”. If your
LDAP directory contains groups whose members are dictated by a different
attribute, it can be specified here.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">LDAP_MEMBER_ATTRIBUTE_TYPE</span></code></dt><dd><p>Specify whether the attribute defined in <code class="docutils literal notranslate"><span class="pre">ldap-member-attribute</span></code> (Usually
“member”) identifies a group member by DN or by username.  Possible values:
“dn” (the default, if not specified) or “uid”.</p>
<p>Example: an LDAP server may present groups using the <code class="docutils literal notranslate"><span class="pre">groupOfNames</span></code>
scheme:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>dn: cn=group1,ou=Groups,dc=example,dc=net
objectClass: groupOfNames
cn: group1
gidNumber: 12345
member: uid=user1,ou=People,dc=example,dc=net
member: uid=user2,ou=People,dc=example,dc=net
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">ldap-member-attribute</span></code> is <code class="docutils literal notranslate"><span class="pre">member</span></code> and <code class="docutils literal notranslate"><span class="pre">ldap-member-attribute-type</span></code> is <code class="docutils literal notranslate"><span class="pre">dn</span></code>.</p>
<p>Example: an LDAP server may present groups using the <code class="docutils literal notranslate"><span class="pre">posixGroup</span></code>
scheme:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>dn: cn=group1,ou=Groups,dc=example,dc=net
objectClass: posixGroup
cn: group1
gidNumber: 12345
memberUid: user1
memberUid: user2
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">ldap-member-attribute</span></code> is <code class="docutils literal notranslate"><span class="pre">memberUid</span></code> and <code class="docutils literal notranslate"><span class="pre">ldap-member-attribute-type</span></code> is
<code class="docutils literal notranslate"><span class="pre">uid</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">LDAP_USER_ATTRIBUTES</span></code></dt><dd><p>The attribute or attributes to retrieve from the LDAP directory for the
currently logged-in user, separated by commas. If specified, the attributes
listed here are retrieved from each authenticated user and dynamically
applied to the parameters of that user’s connections as <a class="reference internal" href="configuring-guacamole.html#parameter-tokens"><span class="std std-ref">parameter
tokens</span></a> with the prefix “<code class="docutils literal notranslate"><span class="pre">LDAP_</span></code>”. If omitted, LDAP user
attributes will not be used for parameter tokens.</p>
<p>When a user authenticates with LDAP and accesses a particular Guacamole
connection, the values of these tokens will be the values of their
corresponding attributes at the time of authentication. If the attribute has
no value for the current user, then the corresponding token is not applied.
If the attribute has multiple values, then the first value of the attribute
is used.</p>
<p>When converting an LDAP attribute name into a parameter token name, the name
of the attribute is transformed into uppercase with each word separated by
underscores, a naming convention referred to as “uppercase with underscores”
or “<a class="reference external" href="https://en.wikipedia.org/wiki/Naming_convention_(programming)#Multiple-word_identifiers">screaming snake case</a>”.</p>
<p>For example:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>LDAP Attribute</p></th>
<th class="head"><p>Parameter Token</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">lowercase-with-dashes</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">${LDAP_LOWERCASE_WITH_DASHES}</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CamelCase</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">${LDAP_CAMEL_CASE}</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">headlessCamelCase</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">${LDAP_HEADLESS_CAMEL_CASE}</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">lettersAndNumbers1234</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">${LDAP_LETTERS_AND_NUMBERS_1234}</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">aRANDOM_mixOf-3NAMINGConventions</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">${LDAP_A_RANDOM_MIX_OF_3_NAMING_CONVENTIONS}</span></code></p></td>
</tr>
</tbody>
</table>
</div>
<p>Usage of parameter tokens is discussed in more detail in
<a class="reference internal" href="configuring-guacamole.html"><span class="doc std std-doc">Configuring Guacamole</span></a> in <a class="reference internal" href="configuring-guacamole.html#parameter-tokens"><span class="std std-ref">Parameter tokens</span></a>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">LDAP_USER_SEARCH_FILTER</span></code></dt><dd><p>The search filter used to query the LDAP tree for users that can log into and
be granted privileges in Guacamole. <em>If this property is omitted the default of
<code class="docutils literal notranslate"><span class="pre">(objectClass=*)</span></code> will be used.</em></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">LDAP_CONFIG_BASE_DN</span></code></dt><dd><p>The base of the DN for all Guacamole configurations. <em>This property is
optional.</em> If omitted, the configurations of Guacamole connections will
simply not be queried from the LDAP directory. If specified, this base DN
will be used when querying the configurations accessible by a user once they
have successfully logged in.</p>
<p>Each configuration is analogous to a connection. Within Guacamole’s LDAP
support, each configuration functions as a group, having user members (via
the <code class="docutils literal notranslate"><span class="pre">member</span></code> attribute) and optionally group members (via the <code class="docutils literal notranslate"><span class="pre">seeAlso</span></code>
attribute), where each member of a particular configuration group will have
access to the connection defined by that configuration.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">LDAP_GROUP_BASE_DN</span></code></dt><dd><p>The base of the DN for all user groups that may be used by other extensions
to define permissions or that may referenced within Guacamole configurations
using the standard seeAlso attribute. All groups which will be used to
control access to Guacamole configurations must be descendents of this base
DN. <em>If this property is omitted, LDAP groups will have no impact on
Guacamole group memberships, and the <code class="docutils literal notranslate"><span class="pre">seeAlso</span></code> attribute will have no effect
on Guacamole configurations.</em></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">LDAP_GROUP_NAME_ATTRIBUTE</span></code></dt><dd><p>The attribute or attributes which define the unique name of user groups in
the LDAP directory. Usually, and by default, this will simply be “cn”. If
your LDAP directory contains groups whose names are dictated by different
attributes, multiple attributes can be specified here, separated by commas.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">LDAP_GROUP_SEARCH_FILTER</span></code></dt><dd><p>The search filter used to query the LDAP tree for groups that may be used by
other extensions to define permissions. <em>If this property is omitted the
default of <code class="docutils literal notranslate"><span class="pre">(objectClass=*)</span></code> will be used.</em></p>
<p>This has an effect only if <code class="docutils literal notranslate"><span class="pre">ldap-group-base-dn</span></code> is specified.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">LDAP_DEREFERENCE_ALIASES</span></code></dt><dd><p>Whether the LDAP connection follows (dereferences) aliases as it searches the
tree. Possible values for this property are “never” (the default) so that
aliases will never be followed, “searching” to dereference during search
operations after the base object is located, “finding” to dereference in
order to locate the search base, but not during the actual search, and
“always” to always dereference aliases.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">LDAP_FOLLOW_REFERRALS</span></code></dt><dd><p>Whether the LDAP module follows referrals when processing search results from
an LDAP search. Referrals can be pointers to other parts of an LDAP tree, or
to a different server/connection altogether.  This is a boolean parameter,
with valid options of “true” or “false.” The default is false. When disabled,
LDAP referrals will be ignored when encountered by the Guacamole LDAP client
and the client will move on to the next result.  When enabled, the LDAP
client will follow the referral and process results within the referral,
subject to the maximum hops parameter below.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">LDAP_MAX_REFERRAL_HOPS</span></code></dt><dd><p>The maximum number of referrals that will be processed before the LDAP client
refuses to follow any more referrals. The default is 5. If the
<code class="docutils literal notranslate"><span class="pre">ldap-follow-referrals</span></code> property is set to false (the default), this option
has no effect. If the <code class="docutils literal notranslate"><span class="pre">ldap-follow-referrals</span></code> option is set to true, this
will limit the depth of referrals followed to the number specified.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">LDAP_OPERATION_TIMEOUT</span></code></dt><dd><p>The timeout, in seconds, of any single LDAP operation. The default is 30
seconds. When this timeout is reached LDAP operations will be aborted.</p>
</dd>
</dl>
</div>
</div>
<section id="using-multiple-ldap-servers">
<span id="guac-multi-ldap-config"></span><h3>Using multiple LDAP servers<a class="headerlink" href="#using-multiple-ldap-servers" title="Link to this heading">#</a></h3>
<p>If you have several LDAP servers that Guacamole should authenticate against, it
is possible to provide the configuration details for multiple servers by
creating or editing a YAML file within <code class="docutils literal notranslate"><span class="pre">GUACAMOLE_HOME</span></code> called
<code class="docutils literal notranslate"><span class="pre">ldap-servers.yml</span></code>. This file consists of a single list of servers (a YAML
array of objects) and any number of corresponding configuration options (the
key/value pairs within each YAML object). The available options correspond
<em>exactly</em> to the properties described above except that they lack an <code class="docutils literal notranslate"><span class="pre">ldap-</span></code>
prefix.</p>
<p>For example, the following <code class="docutils literal notranslate"><span class="pre">guacamole.properties</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ldap-hostname: dc1.example.net
ldap-user-base-dn: ou=Users,dc=example,dc=net
ldap-username-attribute: sAMAccountName
ldap-search-bind-dn: cn=Guacamole,ou=Service Users,dc=example,dc=net
ldap-search-bind-password: SomePassword!
</pre></div>
</div>
<p>is exactly equivalent to the following <code class="docutils literal notranslate"><span class="pre">ldap-servers.yml</span></code></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>- hostname: dc1.example.net
  user-base-dn: ou=Users,dc=example,dc=net
  username-attribute: sAMAccountName
  search-bind-dn: cn=Guacamole,ou=Service Users,dc=example,dc=net
  search-bind-password: SomePassword!
</pre></div>
</div>
<p>The benefit of using <code class="docutils literal notranslate"><span class="pre">ldap-servers.yml</span></code> is that the format allows multiple
servers to be defined, relying on the properties within <code class="docutils literal notranslate"><span class="pre">guacamole.properties</span></code>
as defaults. For example, the following <code class="docutils literal notranslate"><span class="pre">ldap-servers.yml</span></code> defines two LDAP
servers:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>- hostname: dc1.example.net
  user-base-dn: ou=Users,dc=example,dc=net
  username-attribute: sAMAccountName
  search-bind-dn: cn=Guacamole,ou=Service Users,dc=example,dc=net
  search-bind-password: SomePassword!

- hostname: dc2.example.net
  user-base-dn: ou=Users,dc=example,dc=net
  username-attribute: sAMAccountName
  search-bind-dn: cn=Guacamole,ou=Service Users,dc=example,dc=net
  search-bind-password: SomePassword!
</pre></div>
</div>
<p>Leveraging the fact that values within <code class="docutils literal notranslate"><span class="pre">guacamole.properties</span></code> are used as the
default values for all LDAP servers in <code class="docutils literal notranslate"><span class="pre">ldap-servers.yml</span></code>, the above can be
abbreviated by moving the common options into <code class="docutils literal notranslate"><span class="pre">guacamole.properties</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ldap-user-base-dn: ou=Users,dc=example,dc=net
ldap-username-attribute: sAMAccountName
ldap-search-bind-dn: cn=Guacamole,ou=Service Users,dc=example,dc=net
ldap-search-bind-password: SomePassword!
</pre></div>
</div>
<p>Leaving <code class="docutils literal notranslate"><span class="pre">ldap-servers.yml</span></code> containing, simply:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>- hostname: dc1.example.net
- hostname: dc2.example.net
</pre></div>
</div>
<p>If multiple LDAP servers are listed within <code class="docutils literal notranslate"><span class="pre">ldap-servers.yml</span></code>, and a user
attempts to log into Guacamole, each defined LDAP server is tried, in order,
until one server successfully authenticates the user or until all servers fail.</p>
<p>If not all LDAP servers are relevant to all users, and it is reasonable to
determine which user is relevant to which LDAP server by the format of their
username, patterns can be specified on a per-server basis to narrow which
servers apply to which login attempts. For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>- hostname: dc1.example.net
  match-usernames: COMPANYA\\(.*)

- hostname: dc2.example.net
  match-usernames: COMPANYB\\(.*)
</pre></div>
</div>
<p>The value for <code class="docutils literal notranslate"><span class="pre">match-usernames</span></code> can be any regular expression accepted by Java,
where the capturing group dictates the portion that should be considered the
user’s username with respect to Guacamole. If multiple patterns should apply to
a particular LDAP server, this can be specified with a list of patterns for
<code class="docutils literal notranslate"><span class="pre">match-usernames</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>- hostname: dc1.example.net
  match-usernames:
    - COMPANYA\\(.*)
    - (.*)@a\.example\.net

- hostname: dc2.example.net
  match-usernames:
    - COMPANYB\\(.*)
    - (.*)@b\.example\.net
</pre></div>
</div>
</section>
</section>
<section id="completing-installation">
<h2>Completing installation<a class="headerlink" href="#completing-installation" title="Link to this heading">#</a></h2>
<div class="tab-set docutils">
<input checked="True" class="tab-input" id="tab-set--3-input--1" name="tab-set--3" type="radio"><label class="tab-label" for="tab-set--3-input--1">Native Webapp (Tomcat)</label><div class="tab-content docutils">
<p>Guacamole will only reread its configuration and load newly-installed
extensions during startup, so Tomcat will need to be restarted before these
changes can take effect. Restart Tomcat and give the new functionality a try.</p>
<p><em>You do not need to restart guacd</em>.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>If Guacamole does not come back online after restarting Tomcat, <strong>check the
logs</strong>. Configuration problems may prevent Guacamole from starting up, and any
such errors will be recorded in Tomcat’s logs.</p>
</div>
</div>
<input class="tab-input" id="tab-set--3-input--2" name="tab-set--3" type="radio"><label class="tab-label" for="tab-set--3-input--2">Container (Docker)</label><div class="tab-content docutils">
<p>The environment variables that configure the behavior of Docker can only be set
at the time the Docker container is created. To apply these configuration
changes, you will need to recreate the container.</p>
<dl class="simple myst">
<dt>If your Guacamole container was deployed using Docker Compose:</dt><dd><p>Simply making the desired changes to your <code class="docutils literal notranslate"><span class="pre">docker-compose.yml</span></code> and running
<code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">compose</span> <span class="pre">up</span></code> is sufficient. Docker Compose will automatically
recognize that the environment variables of the container have changed and
recreate it.</p>
</dd>
<dt>If your Guacamole container was deployed manually (using <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span></code>):</dt><dd><p>You wll need to manually use <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">rm</span></code> to remove the old container and then
manually recreate it with <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span></code> and the new environment variables.</p>
</dd>
</dl>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>If Guacamole does not come back online after recreating the container, <strong>check
the Docker logs</strong>. Configuration problems may prevent Guacamole from starting
up, and any such errors will be recorded in the Docker logs for the Guacamole
container.</p>
</div>
</div>
</div>
</section>
<section id="parameter-tokens">
<span id="guac-ldap-tokens"></span><h2>Parameter tokens<a class="headerlink" href="#parameter-tokens" title="Link to this heading">#</a></h2>
<p>In addition to <a class="reference internal" href="configuring-guacamole.html#parameter-tokens"><span class="std std-ref">the standard parameter tokens</span></a> and the
parameter tokens from other extensions, authenticating with LDAP makes the
following tokens available for use within connection configurations:</p>
<dl class="simple myst">
<dt><code class="samp docutils literal notranslate"><span class="pre">${LDAP_</span><em><span class="pre">ATTRIBUTE</span></em><span class="pre">}</span></code></dt><dd><p>The value of the <code class="docutils literal notranslate"><span class="pre">ATTRIBUTE</span></code> attribute of the current user’s LDAP account.
This token will only be defined for users that have the relevant attribute
set, and only if that attribute was explicitly configured using <a class="reference internal" href="#guac-ldap-config"><span class="std std-ref">the
<code class="docutils literal notranslate"><span class="pre">ldap-user-attributes</span></code> property</span></a>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">${LDAP_DOMAIN}</span></code></dt><dd><p>The domain of the LDAP user account of the current user. This token will be
defined only for users that have authenticated with LDAP, and only for users
that authenticated with a down-level login (<code class="docutils literal notranslate"><span class="pre">DOMAIN\username</span></code>) or a UPN-style
login (<code class="docutils literal notranslate"><span class="pre">username&#64;domain</span></code>).</p>
</dd>
</dl>
<p>Usage of parameter tokens is discussed in more detail in
<a class="reference internal" href="configuring-guacamole.html"><span class="doc std std-doc">Configuring Guacamole</span></a> in <a class="reference internal" href="configuring-guacamole.html#parameter-tokens"><span class="std std-ref">Parameter tokens</span></a>.</p>
</section>
<section id="the-ldap-schema">
<span id="ldap-auth-schema"></span><h2>The LDAP schema<a class="headerlink" href="#the-ldap-schema" title="Link to this heading">#</a></h2>
<p>Guacamole’s LDAP support allows users and connections to be managed purely
within an LDAP directory defined in <code class="docutils literal notranslate"><span class="pre">guacamole.properties</span></code>.  This is
accomplished with a minimum of changes to the standard LDAP schema - all
Guacamole users are traditional LDAP users and share the same mechanism of
authentication. The only new type of object required is a representation for
Guacamole connections, <code class="docutils literal notranslate"><span class="pre">guacConfigGroup</span></code>, which was added to your server’s
schema during the install process above.</p>
<section id="users">
<h3>Users<a class="headerlink" href="#users" title="Link to this heading">#</a></h3>
<p>All Guacamole users, as far as the LDAP support is concerned, are LDAP users
with standard LDAP credentials. When a user signs in to Guacamole, their
username and password will be used to bind to the LDAP server. If this bind
operation is successful, the available connections are queried from the
directory and the user is allowed in.</p>
</section>
<section id="connections-and-parameters">
<h3>Connections and parameters<a class="headerlink" href="#connections-and-parameters" title="Link to this heading">#</a></h3>
<p>Each connection is represented by an instance of the <code class="docutils literal notranslate"><span class="pre">guacConfigGroup</span></code> object
class, an extended version of the standard LDAP <code class="docutils literal notranslate"><span class="pre">groupOfNames</span></code>, which provides
a protocol and set of parameters. Only members of the <code class="docutils literal notranslate"><span class="pre">guacConfigGroup</span></code> will
have access to the corresponding connection.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">guacConfigGroup</span></code> object class provides two new attributes in addition to
those provided by <code class="docutils literal notranslate"><span class="pre">groupOfNames</span></code>:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">guacConfigProtocol</span></code></dt><dd><p>The protocol associated with the connection, such as “<code class="docutils literal notranslate"><span class="pre">vnc</span></code>” or “<code class="docutils literal notranslate"><span class="pre">rdp</span></code>”. This
attribute is required for every <code class="docutils literal notranslate"><span class="pre">guacConfigGroup</span></code> and can be given only once.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">guacConfigParameter</span></code></dt><dd><p>The name and value of a parameter for the specified protocol. This is given
as <code class="docutils literal notranslate"><span class="pre">name=value</span></code>, where “name” is the name of the parameter, as defined by the
documentation for the protocol specified, and “value” is any allowed value for
that parameter.</p>
<p>This attribute can be given multiple times for the same connection.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">guacConfigProxyHostname</span></code></dt><dd><p>The host name or IP address to use for connecting to guacd in order to
establish the connection to the server. This attribute is optional and,
if not provided, will default to the system-level configuration for
connecting to guacd, either the default of <code class="docutils literal notranslate"><span class="pre">localhost</span></code> or the value
defined by <code class="docutils literal notranslate"><span class="pre">guacd-hostname</span></code> in <code class="docutils literal notranslate"><span class="pre">guacamole.properties</span></code>. This attribute may
only be specified once per connection.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">guacConfigProxyPort</span></code></dt><dd><p>The TCP port to use in order to connect to guacd to establish the
connection to the server. This attribute is optional, and, like the
<code class="docutils literal notranslate"><span class="pre">guacConfigProxyHostname</span></code> attribute, will default to the system-level
configuration. This attribute may be specified at most once per connection.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">guacConfigProxyEncryption</span></code></dt><dd><p>The encryption method that should be used to connect to guacd in order
to establish the connection to the server. This attribute is optional
and will default to the system-level configuration for connecting to
guacd. Valid values for this are <code class="docutils literal notranslate"><span class="pre">NONE</span></code> or <code class="docutils literal notranslate"><span class="pre">SSL</span></code>. This attribute may
be specified at most once per connection.</p>
</dd>
</dl>
<p>For example, to create a new VNC connection which connects to “localhost” at
port 5900, while granting access to <code class="docutils literal notranslate"><span class="pre">user1</span></code> and <code class="docutils literal notranslate"><span class="pre">user2</span></code>, you could create an
<code class="docutils literal notranslate"><span class="pre">.ldif</span></code> file like the following:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>dn: cn=Example Connection,ou=groups,dc=example,dc=net
objectClass: guacConfigGroup
objectClass: groupOfNames
cn: Example Connection
guacConfigProtocol: vnc
guacConfigParameter: hostname=localhost
guacConfigParameter: port=5900
guacConfigParameter: password=secret
member: cn=user1,ou=people,dc=example,dc=net
member: cn=user2,ou=people,dc=example,dc=net
</pre></div>
</div>
<p>The new connection can then be created using the <strong class="command">ldapadd</strong> utility:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ldapadd<span class="w"> </span>-x<span class="w"> </span>-D<span class="w"> </span><span class="nv">cn</span><span class="o">=</span>admin,dc<span class="o">=</span>example,dc<span class="o">=</span>net<span class="w"> </span>-W<span class="w"> </span>-f<span class="w"> </span>example-connection.ldif
<span class="go">Enter LDAP Password:</span>
<span class="go">adding new entry &quot;cn=Example Connection,ou=groups,dc=example,dc=net&quot;</span>

<span class="gp">$</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">cn=admin,dc=example,dc=net</span></code> is an administrator account with permission
to create new entries, and <code class="docutils literal notranslate"><span class="pre">example-connection.ldif</span></code> is the name of the <code class="docutils literal notranslate"><span class="pre">.ldif</span></code>
file you just created.</p>
<p>There is, of course, no need to use only the standard LDAP utilities to create
connections and users. There are useful graphical environments for manipulating
LDAP directories, such as <a class="reference external" href="https://directory.apache.org/studio/">Apache Directory Studio</a>,
which make many of the tasks given above much easier.</p>
</section>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="troubleshooting.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Troubleshooting</p>
      </div>
    </a>
    <a class="right-next"
       href="mfa.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Multi-factor authentication</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#how-guacamole-uses-ldap">How Guacamole uses LDAP</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#intalling-enabling-the-ldap-extension">Intalling/Enabling the LDAP extension</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#preparing-your-ldap-directory-optional">Preparing your LDAP directory (optional)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#applying-the-schema-changes-to-openldap">Applying the schema changes to OpenLDAP</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#associating-ldap-with-a-database-recommended">Associating LDAP with a database (recommended)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#required-configuration">Required configuration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#additional-configuration-optional">Additional configuration (optional)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-multiple-ldap-servers">Using multiple LDAP servers</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#completing-installation">Completing installation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#parameter-tokens">Parameter tokens</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-ldap-schema">The LDAP schema</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#users">Users</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#connections-and-parameters">Connections and parameters</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By The Apache Software Foundation
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025 The Apache Software Foundation.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>